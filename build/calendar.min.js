!function(e){"use strict";e.module("aeCalendar",["ngLocale"]).provider("aeCalendar",function(){this.config={classes:{calendar:"calendar",calendarCaption:"calendar-caption",calendarDayOfPrevMonth:"prev",calendarDayOfNextMonth:"next",calendarDayCurrent:"current",calendarDayActive:"active",calendarDayValid:"valid",calendarDayBound:"bound"},templateUrl:"aeCalendar.tpl",week:[7,1,2,3,4,5,6]},this.$get=function(){return{config:this.config,getMonth:function(e){for(var t,n,a=new Date(e.getFullYear(),e.getMonth()-1,1),i=this.getMonthLength(a),r=new Date(e.getFullYear(),e.getMonth(),1),o=this.getMonthLength(r),l=new Date(e.getFullYear(),e.getMonth()+1,1),c=(this.getMonthLength(l),1),s=[],u=this.config.week[r.getDay()],g=0,d=1,h=0;6>h;h++){for(var t=[],M=1;8>M;M++)o>=d&&(g>0||M>=u)?(n=new Date(r.getFullYear(),r.getMonth(),d),t.push(n),d++):0==g?(n=new Date(r.getFullYear(),r.getMonth()-1,i-(u-M-1)),n.isPrev=!0,t.push(n)):(n=new Date(r.getFullYear(),r.getMonth()+1,c++),n.isNext=!0,t.push(n));g++,s.push(t)}return s},getMonthLength:function(e){var t=[31,28,31,30,31,30,31,31,30,31,30,31][e.getMonth()];return 1==e.getMonth()&&(e.getFullYear()%4==0&&e.getFullYear()%100!=0||e.getFullYear()%400==0)&&(t=29),t},isDateInMonth:function(e,t){var t=new Date(t.getFullYear(),t.getMonth(),1);return e>=t&&(t.setMonth(t.getMonth()+1),t>e)?!0:!1},isDateLtMonth:function(e,t){var t=new Date(t.getFullYear(),t.getMonth(),1);return t>e?!0:!1},isDateGtMonth:function(e,t){var t=new Date(t.getFullYear(),t.getMonth()+1,1);return e>=t?!0:!1}}}}).directive("aeCalendar",["aeCalendar","$locale",function(e){return{restrict:"EA",replace:!0,templateUrl:e.config.templateUrl,scope:{dateView:"=?",date:"=?",dateMin:"=?",dateMax:"=?"},controller:["$scope",function(t){var n=null;t.$watch("dateView",function(a){a?(n=new Date,n=new Date(n.getFullYear(),n.getMonth(),n.getDate()),t.aMonth=e.getMonth(a)):t.dateView=new Date});var a=null;t.$watch("dateMin",function(e){e&&(a=new Date(e.getFullYear(),e.getMonth(),e.getDate()))});var i=null;t.$watch("dateMax",function(e){e&&(i=new Date(e.getFullYear(),e.getMonth(),e.getDate()))}),t.prevMonth=function(){t.dateView=new Date(t.dateView),t.isPrevMonthDisabled()||t.dateView.setMonth(t.dateView.getMonth()-1)},t.isPrevMonthDisabled=function(){return a&&(e.isDateInMonth(a,t.dateView)||e.isDateGtMonth(a,t.dateView))||!1},t.nextMonth=function(){t.dateView=new Date(t.dateView),t.isNextMonthDisabled()||t.dateView.setMonth(t.dateView.getMonth()+1)},t.isNextMonthDisabled=function(){return i&&(e.isDateInMonth(i,t.dateView)||e.isDateLtMonth(i,t.dateView))||!1},t.getCalendarClass=function(){return e.config.classes.calendar},t.getCalendarCaptionClass=function(){return e.config.classes.calendarCaption},t.getDateClass=function(n){var a={};return a[e.config.classes.calendarDayOfPrevMonth]=n.isPrev,a[e.config.classes.calendarDayOfNextMonth]=n.isNext,a[e.config.classes.calendarDayValid]=t.isValid(n),a[e.config.classes.calendarDayBound]=t.isBound(n),a[e.config.classes.calendarDayActive]=t.isActive(n),a[e.config.classes.calendarDayCurrent]=t.isCurrent(n),a},t.isCurrent=function(e){return n.getTime()==e.getTime()},t.isActive=function(e){return t.date?e.getTime()==t.date.getTime():void 0},t.isValid=function(e){return t.isValidMin(e)&&t.isValidMax(e)},t.isValidMin=function(e){return a?e.getTime()>=a.getTime():!0},t.isValidMax=function(e){return i?e.getTime()<=i.getTime():!0},t.isBound=function(e){return t.isBoundMin(e)||t.isBoundMax(e)},t.isBoundMin=function(e){return a?e.getTime()==a.getTime():void 0},t.isBoundMax=function(e){return i?e.getTime()==i.getTime():void 0},t.setDate=function(e){a&&a>e&&(e=a),i&&e>i&&(e=i),t.date=e}}]}}])}(angular);