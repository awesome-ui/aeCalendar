!function(e){"use strict";e.module("aeCalendar",["ngLocale"]).provider("aeCalendar",function(){this.config={classes:{calendar:"calendar",calendarCaption:"calendar-caption",calendarDayOfPrevMonth:"prev",calendarDayOfNextMonth:"next",calendarDayActive:"active",calendarDayValid:"valid",calendarDayBound:"bound"},templateUrl:"aeCalendar.tpl",week:[7,1,2,3,4,5,6]},this.$get=function(){return{config:this.config,getMonth:function(e){for(var t,n,a=new Date(e.getFullYear(),e.getMonth()-1,1),i=this.getMonthLength(a),r=new Date(e.getFullYear(),e.getMonth(),1),o=this.getMonthLength(r),l=new Date(e.getFullYear(),e.getMonth()+1,1),c=(this.getMonthLength(l),1),s=[],d=this.config.week[r.getDay()],u=0,g=1,h=0;6>h;h++){for(var t=[],f=1;8>f;f++)o>=g&&(u>0||f>=d)?(n=new Date(r.getFullYear(),r.getMonth(),g),t.push(n),g++):0==u?(n=new Date(r.getFullYear(),r.getMonth()-1,i-(d-f-1)),n.isPrev=!0,t.push(n)):(n=new Date(r.getFullYear(),r.getMonth()+1,c++),n.isNext=!0,t.push(n));u++,s.push(t)}return s},getMonthLength:function(e){var t=[31,28,31,30,31,30,31,31,30,31,30,31][e.getMonth()];return 1==e.getMonth()&&(e.getFullYear()%4==0&&e.getFullYear()%100!=0||e.getFullYear()%400==0)&&(t=29),t}}}}).directive("aeCalendar",["aeCalendar","$locale",function(e){return{restrict:"EA",replace:!0,templateUrl:e.config.templateUrl,scope:{dateView:"=?",date:"=?",dateMin:"=?",dateMax:"=?"},controller:["$scope",function(t){t.$watch("dateView",function(n){n?t.aMonth=e.getMonth(n):t.dateView=new Date});var n=null;t.$watch("dateMin",function(e){e&&(n=new Date(e.getFullYear(),e.getMonth(),e.getDate()))});var a=null;t.$watch("dateMax",function(e){e&&(a=new Date(e.getFullYear(),e.getMonth(),e.getDate()))}),t.prevMonth=function(){t.dateView=new Date(t.dateView),t.dateView.setMonth(t.dateView.getMonth()-1)},t.nextMonth=function(){t.dateView=new Date(t.dateView),t.dateView.setMonth(t.dateView.getMonth()+1)},t.getCalendarClass=function(){return e.config.classes.calendar},t.getCalendarCaptionClass=function(){return e.config.classes.calendarCaption},t.getDateClass=function(n){var a={};return a[e.config.classes.calendarDayOfPrevMonth]=n.isPrev,a[e.config.classes.calendarDayOfNextMonth]=n.isNext,a[e.config.classes.calendarDayValid]=t.isValid(n),a[e.config.classes.calendarDayBound]=t.isBound(n),a[e.config.classes.calendarDayActive]=t.isActive(n),a},t.isActive=function(e){return t.date?e.getTime()==t.date.getTime():void 0},t.isValid=function(e){return t.isValidMin(e)&&t.isValidMax(e)},t.isValidMin=function(e){return n?e.getTime()>=n.getTime():!0},t.isValidMax=function(e){return a?e.getTime()<=a.getTime():!0},t.isBound=function(e){return t.isBoundMin(e)||t.isBoundMax(e)},t.isBoundMin=function(e){return n?e.getTime()==n.getTime():void 0},t.isBoundMax=function(e){return a?e.getTime()==a.getTime():void 0},t.setDate=function(e){n&&n>e&&(e=n),a&&e>a&&(e=a),t.date=e}}]}}])}(angular);